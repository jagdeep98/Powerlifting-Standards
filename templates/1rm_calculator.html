<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1RM & RPE Calculator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include 'navbar.html' %}

    <!-- ========== 1RM Calculator Section ========== -->
    <div class="container">
        <h1>1RM Calculator</h1>
        <form method="POST">
            <!-- Weight input with unit selection dropdown -->
            <div class="form-group">
                <label for="weight">Weight:</label>
                <input type="number" name="weight" id="weight" class="input-box" step="0.1" value="{{ result.weight if result else '' }}" required>
                <select name="weight_unit" id="weight_unit" class="select-unit">
                    <option value="kg" {% if result and result.weight_unit == 'kg' %}selected{% endif %}>kg</option>
                    <option value="lbs" {% if result and result.weight_unit == 'lbs' %}selected{% endif %}>lbs</option>
                </select>
            </div>

            <!-- Repetitions input -->
            <div class="form-group">
                <label for="reps">Repetitions:</label>
                <input type="number" name="reps" id="reps" class="input-box" value="{{ result.reps if result else '' }}" required>
            </div>

            <button type="submit">Calculate 1RM</button>
        </form>

        {% if result %}
            {% if result.error %}
                <p class="error">{{ result.error }}</p>
            {% else %}
                <div class="result">
                    <p>Brzycki: <strong>{{ result.one_rm_brzycki }} {{ result.weight_unit }}</strong></p>
                    <p>Epley: <strong>{{ result.one_rm_epley }} {{ result.weight_unit }}</strong></p>
                </div>
            {% endif %}
        {% endif %}
    </div>

    <!-- ========== RPE Table Section ========== -->
    <div class="container" style="margin-top: 50px;">
        <h1>RPE Table</h1>
        <form method="POST">
            <div class="form-group">
                <label for="user_1rm">Your 1RM:</label>
                <input type="number" step="0.1" name="user_1rm" id="user_1rm" class="input-box" value="{{ rpe_input.user_1rm if rpe_input else '' }}">
            </div>

            <div class="form-group">
                <label for="user_bw">Your Bodyweight (BW):</label>
                <input type="number" step="0.1" name="user_bw" id="user_bw" class="input-box" value="{{ rpe_input.user_bw if rpe_input else '' }}">
                <select name="bw_unit" id="bw_unit" class="select-unit">
                    <option value="kg" {% if rpe_input and rpe_input.bw_unit == 'kg' %}selected{% endif %}>kg</option>
                    <option value="lbs" {% if rpe_input and rpe_input.bw_unit == 'lbs' %}selected{% endif %}>lbs</option>
                </select>
            </div>

            <button type="submit">Generate RPE Table</button>
        </form>

        <!-- Added spacing between button and table -->
        <div style="margin-top: 20px;"></div>

        <table>
            <thead>
                <tr>
                    <th>RPE\Reps</th>
                    {% for rep in range(1, 13) %}
                        <th>{{ rep }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in rpe_table %}
                    <tr>
                        <td>{{ row.rpe }}</td>
                        {% for val in row["values"] %}
                            <td>{{ val }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ========== Footer Section ========== -->
    <footer>
        <p>
This RPE table is for weighted calisthenics (muscle-ups, dips, and pull-ups) but can also be used for other lifts. It was originally created on <a href="https://www.kingofweighted.com/calculator">https://www.kingofweighted.com/calculator</a>.
        </p>
        <p>
            Please defer to <a href="https://en.wikipedia.org/wiki/One-repetition_maximum" target="_blank">
           https://en.wikipedia.org/wiki/One-repetition_maximum</a> for Brzycki and Epley formulas.
        </p>
        <p><strong>&#169; 2025 @jagdeep.pl All rights reserved.</strong></p>
    </footer>

</body>
</html>
